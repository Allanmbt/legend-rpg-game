{"ast":null,"code":"var _jsxFileName = \"D:\\\\mm-rpg-react\\\\src\\\\components\\\\Modals\\\\ItemContextMenu.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport './Modal.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ItemContextMenu = ({\n  position,\n  item,\n  onClose,\n  onEquip,\n  onDiscard\n}) => {\n  _s();\n  const menuRef = useRef(null);\n\n  // Ê∑ªÂä†ÁÇπÂáªÂ§ñÈÉ®ÂÖ≥Èó≠ËèúÂçïÁöÑÊïàÊûú\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\n        onClose();\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [onClose]);\n\n  // Ë∞ÉÊï¥ËèúÂçï‰ΩçÁΩÆÔºåÈò≤Ê≠¢Ë∂ÖÂá∫Á™óÂè£\n  const adjustPosition = () => {\n    if (!menuRef.current) return position;\n    const {\n      x,\n      y\n    } = position;\n    const menuWidth = menuRef.current.offsetWidth;\n    const menuHeight = menuRef.current.offsetHeight;\n    const windowWidth = window.innerWidth;\n    const windowHeight = window.innerHeight;\n    let adjustedX = x;\n    let adjustedY = y;\n    if (x + menuWidth > windowWidth) {\n      adjustedX = x - menuWidth;\n    }\n    if (y + menuHeight > windowHeight) {\n      adjustedY = y - menuHeight;\n    }\n    return {\n      x: adjustedX,\n      y: adjustedY\n    };\n  };\n  const menuPosition = adjustPosition();\n\n  // Ê£ÄÊü•Áâ©ÂìÅÊòØÂê¶ÂèØË£ÖÂ§á\n  const isEquippable = item && item.slot !== undefined;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"context-menu\",\n    ref: menuRef,\n    style: {\n      left: `${menuPosition.x}px`,\n      top: `${menuPosition.y}px`\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"context-menu-header\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"context-menu-item-name\",\n        children: item.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), isEquippable && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"context-menu-item\",\n      onClick: () => onEquip(item),\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"context-menu-icon\",\n        children: \"\\uD83D\\uDC46\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"context-menu-text\",\n        children: \"\\u88C5\\u5907\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"context-menu-item\",\n      onClick: () => onDiscard(item),\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"context-menu-icon\",\n        children: \"\\uD83D\\uDDD1\\uFE0F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"context-menu-text\",\n        children: \"\\u4E22\\u5F03\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n};\n_s(ItemContextMenu, \"lbfKxozlpk19p2tUpYavRIkbEU0=\");\n_c = ItemContextMenu;\nexport default ItemContextMenu;\nvar _c;\n$RefreshReg$(_c, \"ItemContextMenu\");","map":{"version":3,"names":["React","useEffect","useRef","jsxDEV","_jsxDEV","ItemContextMenu","position","item","onClose","onEquip","onDiscard","_s","menuRef","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","adjustPosition","x","y","menuWidth","offsetWidth","menuHeight","offsetHeight","windowWidth","window","innerWidth","windowHeight","innerHeight","adjustedX","adjustedY","menuPosition","isEquippable","slot","undefined","className","ref","style","left","top","children","name","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["D:/mm-rpg-react/src/components/Modals/ItemContextMenu.jsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport './Modal.css';\r\n\r\nconst ItemContextMenu = ({ position, item, onClose, onEquip, onDiscard }) => {\r\n    const menuRef = useRef(null);\r\n\r\n    // Ê∑ªÂä†ÁÇπÂáªÂ§ñÈÉ®ÂÖ≥Èó≠ËèúÂçïÁöÑÊïàÊûú\r\n    useEffect(() => {\r\n        const handleClickOutside = (event) => {\r\n            if (menuRef.current && !menuRef.current.contains(event.target)) {\r\n                onClose();\r\n            }\r\n        };\r\n\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => {\r\n            document.removeEventListener('mousedown', handleClickOutside);\r\n        };\r\n    }, [onClose]);\r\n\r\n    // Ë∞ÉÊï¥ËèúÂçï‰ΩçÁΩÆÔºåÈò≤Ê≠¢Ë∂ÖÂá∫Á™óÂè£\r\n    const adjustPosition = () => {\r\n        if (!menuRef.current) return position;\r\n\r\n        const { x, y } = position;\r\n        const menuWidth = menuRef.current.offsetWidth;\r\n        const menuHeight = menuRef.current.offsetHeight;\r\n        const windowWidth = window.innerWidth;\r\n        const windowHeight = window.innerHeight;\r\n\r\n        let adjustedX = x;\r\n        let adjustedY = y;\r\n\r\n        if (x + menuWidth > windowWidth) {\r\n            adjustedX = x - menuWidth;\r\n        }\r\n\r\n        if (y + menuHeight > windowHeight) {\r\n            adjustedY = y - menuHeight;\r\n        }\r\n\r\n        return { x: adjustedX, y: adjustedY };\r\n    };\r\n\r\n    const menuPosition = adjustPosition();\r\n\r\n    // Ê£ÄÊü•Áâ©ÂìÅÊòØÂê¶ÂèØË£ÖÂ§á\r\n    const isEquippable = item && item.slot !== undefined;\r\n\r\n    return (\r\n        <div\r\n            className=\"context-menu\"\r\n            ref={menuRef}\r\n            style={{\r\n                left: `${menuPosition.x}px`,\r\n                top: `${menuPosition.y}px`\r\n            }}\r\n        >\r\n            <div className=\"context-menu-header\">\r\n                <span className=\"context-menu-item-name\">{item.name}</span>\r\n            </div>\r\n\r\n            {isEquippable && (\r\n                <div className=\"context-menu-item\" onClick={() => onEquip(item)}>\r\n                    <span className=\"context-menu-icon\">üëÜ</span>\r\n                    <span className=\"context-menu-text\">Ë£ÖÂ§á</span>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"context-menu-item\" onClick={() => onDiscard(item)}>\r\n                <span className=\"context-menu-icon\">üóëÔ∏è</span>\r\n                <span className=\"context-menu-text\">‰∏¢ÂºÉ</span>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ItemContextMenu;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAChD,OAAO,aAAa;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErB,MAAMC,eAAe,GAAGA,CAAC;EAAEC,QAAQ;EAAEC,IAAI;EAAEC,OAAO;EAAEC,OAAO;EAAEC;AAAU,CAAC,KAAK;EAAAC,EAAA;EACzE,MAAMC,OAAO,GAAGV,MAAM,CAAC,IAAI,CAAC;;EAE5B;EACAD,SAAS,CAAC,MAAM;IACZ,MAAMY,kBAAkB,GAAIC,KAAK,IAAK;MAClC,IAAIF,OAAO,CAACG,OAAO,IAAI,CAACH,OAAO,CAACG,OAAO,CAACC,QAAQ,CAACF,KAAK,CAACG,MAAM,CAAC,EAAE;QAC5DT,OAAO,CAAC,CAAC;MACb;IACJ,CAAC;IAEDU,QAAQ,CAACC,gBAAgB,CAAC,WAAW,EAAEN,kBAAkB,CAAC;IAC1D,OAAO,MAAM;MACTK,QAAQ,CAACE,mBAAmB,CAAC,WAAW,EAAEP,kBAAkB,CAAC;IACjE,CAAC;EACL,CAAC,EAAE,CAACL,OAAO,CAAC,CAAC;;EAEb;EACA,MAAMa,cAAc,GAAGA,CAAA,KAAM;IACzB,IAAI,CAACT,OAAO,CAACG,OAAO,EAAE,OAAOT,QAAQ;IAErC,MAAM;MAAEgB,CAAC;MAAEC;IAAE,CAAC,GAAGjB,QAAQ;IACzB,MAAMkB,SAAS,GAAGZ,OAAO,CAACG,OAAO,CAACU,WAAW;IAC7C,MAAMC,UAAU,GAAGd,OAAO,CAACG,OAAO,CAACY,YAAY;IAC/C,MAAMC,WAAW,GAAGC,MAAM,CAACC,UAAU;IACrC,MAAMC,YAAY,GAAGF,MAAM,CAACG,WAAW;IAEvC,IAAIC,SAAS,GAAGX,CAAC;IACjB,IAAIY,SAAS,GAAGX,CAAC;IAEjB,IAAID,CAAC,GAAGE,SAAS,GAAGI,WAAW,EAAE;MAC7BK,SAAS,GAAGX,CAAC,GAAGE,SAAS;IAC7B;IAEA,IAAID,CAAC,GAAGG,UAAU,GAAGK,YAAY,EAAE;MAC/BG,SAAS,GAAGX,CAAC,GAAGG,UAAU;IAC9B;IAEA,OAAO;MAAEJ,CAAC,EAAEW,SAAS;MAAEV,CAAC,EAAEW;IAAU,CAAC;EACzC,CAAC;EAED,MAAMC,YAAY,GAAGd,cAAc,CAAC,CAAC;;EAErC;EACA,MAAMe,YAAY,GAAG7B,IAAI,IAAIA,IAAI,CAAC8B,IAAI,KAAKC,SAAS;EAEpD,oBACIlC,OAAA;IACImC,SAAS,EAAC,cAAc;IACxBC,GAAG,EAAE5B,OAAQ;IACb6B,KAAK,EAAE;MACHC,IAAI,EAAE,GAAGP,YAAY,CAACb,CAAC,IAAI;MAC3BqB,GAAG,EAAE,GAAGR,YAAY,CAACZ,CAAC;IAC1B,CAAE;IAAAqB,QAAA,gBAEFxC,OAAA;MAAKmC,SAAS,EAAC,qBAAqB;MAAAK,QAAA,eAChCxC,OAAA;QAAMmC,SAAS,EAAC,wBAAwB;QAAAK,QAAA,EAAErC,IAAI,CAACsC;MAAI;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC1D,CAAC,EAELb,YAAY,iBACThC,OAAA;MAAKmC,SAAS,EAAC,mBAAmB;MAACW,OAAO,EAAEA,CAAA,KAAMzC,OAAO,CAACF,IAAI,CAAE;MAAAqC,QAAA,gBAC5DxC,OAAA;QAAMmC,SAAS,EAAC,mBAAmB;QAAAK,QAAA,EAAC;MAAE;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eAC7C7C,OAAA;QAAMmC,SAAS,EAAC,mBAAmB;QAAAK,QAAA,EAAC;MAAE;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5C,CACR,eAED7C,OAAA;MAAKmC,SAAS,EAAC,mBAAmB;MAACW,OAAO,EAAEA,CAAA,KAAMxC,SAAS,CAACH,IAAI,CAAE;MAAAqC,QAAA,gBAC9DxC,OAAA;QAAMmC,SAAS,EAAC,mBAAmB;QAAAK,QAAA,EAAC;MAAG;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eAC9C7C,OAAA;QAAMmC,SAAS,EAAC,mBAAmB;QAAAK,QAAA,EAAC;MAAE;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5C,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC;AAACtC,EAAA,CAxEIN,eAAe;AAAA8C,EAAA,GAAf9C,eAAe;AA0ErB,eAAeA,eAAe;AAAC,IAAA8C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}